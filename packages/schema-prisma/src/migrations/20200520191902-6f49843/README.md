# Migration `20200520191902-6f49843`

This migration has been generated by michael.thanei at 5/20/2020, 7:19:02 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Exercise" (
"id" text  NOT NULL ,"timeslotId" text  NOT NULL ,"topic" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Person" (
"firstname" text  NOT NULL ,"id" text  NOT NULL ,"lastname" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Timeslot" (
"end" timestamp(3)  NOT NULL ,"id" text  NOT NULL ,"start" timestamp(3)  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."_Exercise_Leader" (
"A" text  NOT NULL ,"B" text  NOT NULL )

CREATE TABLE "public"."_Exercise_Participant" (
"A" text  NOT NULL ,"B" text  NOT NULL )

CREATE UNIQUE INDEX "_Exercise_Leader_AB_unique" ON "public"."_Exercise_Leader"("A","B")

CREATE  INDEX "_Exercise_Leader_B_index" ON "public"."_Exercise_Leader"("B")

CREATE UNIQUE INDEX "_Exercise_Participant_AB_unique" ON "public"."_Exercise_Participant"("A","B")

CREATE  INDEX "_Exercise_Participant_B_index" ON "public"."_Exercise_Participant"("B")

ALTER TABLE "public"."Exercise" ADD FOREIGN KEY ("timeslotId")REFERENCES "public"."Timeslot"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_Exercise_Leader" ADD FOREIGN KEY ("A")REFERENCES "public"."Exercise"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_Exercise_Leader" ADD FOREIGN KEY ("B")REFERENCES "public"."Person"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_Exercise_Participant" ADD FOREIGN KEY ("A")REFERENCES "public"."Exercise"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_Exercise_Participant" ADD FOREIGN KEY ("B")REFERENCES "public"."Person"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200520191902-6f49843
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,33 @@
+datasource postgresql {
+  url      = "postgresql://feuertiger:feuertiger@localhost:5432/feuertiger"
+  provider = "postgresql"
+}
+
+generator client {
+  provider = "prisma-client-js"
+  output   = "../dist"
+}
+
+model Exercise {
+  id           String   @id
+  topic        String
+  timeslot     Timeslot @relation(fields: [timeslotId], references: [id])
+  timeslotId   String
+  leaders      Person[] @relation("Exercise_Leader", references: [id])
+  participants Person[] @relation("Exercise_Participant", references: [id])
+}
+
+model Person {
+  id                    String     @id
+  firstname             String
+  lastname              String
+  exercisesParticipated Exercise[] @relation("Exercise_Participant", references: [id])
+  exercisesLeaded       Exercise[] @relation("Exercise_Leader", references: [id])
+}
+
+model Timeslot {
+  id       String     @id
+  start    DateTime
+  end      DateTime
+  Exercise Exercise[]
+}
```


